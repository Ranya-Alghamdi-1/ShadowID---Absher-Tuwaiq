<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>تفاصيل الهوية - هوية الظل</title>
  <link rel="stylesheet" href="styles/main.css">
</head>

<body>
  <div class="mobile-container">
    <div class="container">
      <button class="back-button" onclick="window.location.href='/mobile/dashboard'">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M15 18l-6-6 6-6"></path>
        </svg>
        رجوع
      </button>

      <h2 class="mb-3 text-center">تفاصيل الهوية المؤقتة</h2>

      <!-- Full Screen QR Code -->
      <div class="card mb-3" style="text-align: center;">
        <div
          style="margin: 0 auto; width: 280px; height: 280px; background: white; border-radius: 1.5rem; padding: 1rem;">
          <canvas id="qrCanvas" width="280" height="280"></canvas>
        </div>
      </div>

      <!-- Token Info -->
      <div class="card mb-3">
        <h3 class="mb-3">معلومات الرمز</h3>

        <div class="mb-3">
          <p class="text-secondary" style="font-size: 0.875rem; margin-bottom: 0.5rem;">الرمز</p>
          <p id="tokenDisplay"
            style="font-size: 1.5rem; font-weight: 600; letter-spacing: 2px; font-family: monospace;">--------</p>
        </div>

        <div class="grid grid-2 gap-2 mb-3">
          <div>
            <p class="text-secondary" style="font-size: 0.875rem; margin-bottom: 0.5rem;">وقت الإنشاء</p>
            <p id="createdTime" style="font-weight: 500;">--:--</p>
          </div>
          <div>
            <p class="text-secondary" style="font-size: 0.875rem; margin-bottom: 0.5rem;">وقت الانتهاء</p>
            <p id="expiryTime" style="font-weight: 500;">--:--</p>
          </div>
        </div>

        <div class="mb-3">
          <p class="text-secondary" style="font-size: 0.875rem; margin-bottom: 0.5rem;">الموقع</p>
          <p id="locationDisplay">الرياض، المملكة العربية السعودية</p>
        </div>

        <div>
          <p class="text-secondary" style="font-size: 0.875rem; margin-bottom: 0.5rem;">الجهاز</p>
          <p id="deviceDisplay">--</p>
        </div>
      </div>

      <!-- Actions -->
      <div class="grid gap-2 mb-4">
        <button class="btn btn-primary btn-full" onclick="copyToken()">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
          </svg>
          نسخ الرمز
        </button>

        <button class="btn btn-secondary btn-full" onclick="shareToken()">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="18" cy="5" r="3"></circle>
            <circle cx="6" cy="12" r="3"></circle>
            <circle cx="18" cy="19" r="3"></circle>
            <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
            <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
          </svg>
          مشاركة مع خدمة معتمدة
        </button>

        <button class="btn btn-secondary btn-full" onclick="revokeID()"
          style="color: var(--color-accent-red); border-color: var(--color-accent-red);">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"></circle>
            <line x1="15" y1="9" x2="9" y2="15"></line>
            <line x1="9" y1="9" x2="15" y2="15"></line>
          </svg>
          إلغاء الهوية فوراً
        </button>
      </div>
    </div>
  </div>

  <script src="js/auth-utils.js"></script>
  <script src="js/qr-generator.js"></script>
  <script src="js/id-details.js"></script>
</body>

</html>